<!doctype html>
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>
    <link rel="shortcut icon" href="http://i49.tinypic.com/dpk4ue.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>The Soomla Project</title>

    <link rel="stylesheet" href="../stylesheets/styles.css">
    <link rel="stylesheet" href="../stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>


    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-33649002-2']);
        _gaq.push(['_setDomainName', 'soom.la']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

    <!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
        typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,
    e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
mixpanel.init("0b4c2a4eb16ccf021b70ef2d27e8ecb8");</script><!-- end Mixpanel -->


    <script type="text/javascript">
        $(function () {
            $(window).scroll(function () {
                if ($(window).scrollTop() > 55) {
                    $('#promo-container').css('transform','translateY(-60px)');
                    $('.oss-bar').css("transform", "translateX(200px)");
                    $('.oss-bar .unity').css("transform", "translate(0px, -30px)");
                    $('.oss-bar .cocos2dx').css("transform", "translate(60px, 30px)");
                    $('.oss-bar .ios').css("transform", "translate(120px, 90px)");
                    $('.oss-bar .android').css("transform", "translate(180px, 150px)");
                    $('.facebook').css("transform", "translate(443px, 250px)");
                } else {
                    $('#promo-container').css('transform','translateY(0px)');
                    $('.oss-bar').css("transform", "translateX(0px)");
                    $('.oss-bar .unity').css("transform", "translate(0px, 0px)");
                    $('.oss-bar .cocos2dx').css("transform", "translate(0px, 0px)");
                    $('.oss-bar .ios').css("transform", "translate(0px, 0px)");
                    $('.oss-bar .android').css("transform", "translate(0px, 0px)");
                    $('.facebook').css("transform", "translate(0px, 0px)");
                }
            });

            $(".mix-fmwk-user").click(function() {
                mixpanel.people.set({
                    framework_user: 'yes'
                });
            });

            $(".mix-unity-user").click(function() {
                mixpanel.people.set({
                    project_unity_user: 'yes'
                });
            });

            $(".mix-ios-user").click(function() {
                mixpanel.people.set({
                    project_ios_user: 'yes'
                });
            });

            $(".mix-android-user").click(function() {
                mixpanel.people.set({
                    project_android_user: 'yes'
                });
            });

            $(".mix-cocos-user").click(function() {
                mixpanel.people.set({
                    project_cocos_user: 'yes'
                });
            });
        });

        function sendGAEvent(eventName, desc) {
            _gaq.push(['_trackEvent', 'immediate_goals', eventName, desc]);
        }

        function sendMixEvent(eventName, params) {
            mixpanel.track(eventName, $.extend(params, { source: 'project' }));
        }
    </script>
</head>
<body>



<script>
    sendMixEvent("page_loaded", {});
</script>


<div id="promo-container">
    <div id="promo">
        Full Virtual Economy Solution: Store-front themes, Analytics, Data in the Cloud!<a href="http://soom.la/"
                                       onclick="sendMixEvent('designer_top_link', {  });" target="_blank"
                                       class="promo-btn" style="color: #333;">Learn More</a>
    </div>
</div>

<div class="wrapper">


<header>
    <h2><img src="../img/black_android_logo.png" style="margin-top:12px" height="40px"/> ANDROID</h2>
    <strong>In-App Billing with a single line of code</strong>
    <ul class="actions">
        <li><a class="mix-fmwk-user mix-android-user" href="https://github.com/soomla/android-store/zipball/master"
               onclick="sendGAEvent('code_download_android', 'Someone wants our ZIP !'); sendMixEvent('code_download_android', { kind: 'zip' }); " target="_blank">Download
            <strong>ZIP File</strong></a></li>
        <li><a class="mix-fmwk-user mix-android-user" href="https://github.com/soomla/android-store/tarball/master"
               onclick="sendGAEvent('code_download_android', 'Someone wants our TAR !'); sendMixEvent('code_download_android', { kind: 'tar' }); " target="_blank">Download
            <strong>TAR Ball</strong></a></li>
        <li><a class="mix-fmwk-user mix-android-user" href="https://github.com/soomla/android-store"
               onclick="sendGAEvent('project_view_android', 'Someone wants to view our project !'); sendMixEvent('project_view_android', { }); " target="_blank">View
            On <strong>GitHub</strong></a></li>
    </ul>

    <h2><img src="../img/apple-logo.png" style="margin-top:12px" height="40px"/> iOS</h2>
    <strong>In-App Purchase with a single line of code</strong>
    <ul class="actions">
        <li><a class="mix-fmwk-user mix-ios-user" href="https://github.com/soomla/ios-store/zipball/master"
               onclick="sendGAEvent('code_download_ios', 'Someone wants our ZIP !'); sendMixEvent('code_download_ios', { kind: 'zip' }); " target="_blank">Download
            <strong>ZIP File</strong></a></li>
        <li><a class="mix-fmwk-user mix-ios-user" href="https://github.com/soomla/ios-store/tarball/master"
               onclick="sendGAEvent('code_download_ios', 'Someone wants our TAR !'); sendMixEvent('code_download_ios', { kind: 'tar' }); " target="_blank">Download
            <strong>TAR Ball</strong></a></li>
        <li><a class="mix-fmwk-user mix-ios-user" href="https://github.com/soomla/ios-store"
               onclick="sendGAEvent('project_view_ios', 'Someone wants to view our project !'); sendMixEvent('project_view_ios', { }); " target="_blank">View
            On <strong>GitHub</strong></a></li>
    </ul>

    <h2><img src="../img/cocos.png" style="margin-top:12px" height="40px"/> COCOS2d-X</h2>
    <strong>Extension for the popluar 2D framework</strong>
    <ul class="actions">
        <li style="width: inherit;"><a class="mix-fmwk-user mix-cocos-user" href="https://github.com/soomla/cocos2dx-store"
               onclick="sendGAEvent('project_view_cocos', 'Someone wants to view our project !'); sendMixEvent('project_view_cocos', { }); " target="_blank">View
            On <strong>GitHub</strong></a></li>
    </ul>

    <h2><img src="../img/unity.png" style="margin-top:12px" height="40px"/> Unity
    </h2>
    <strong>Plugin for the leading 3D game engine</strong>
    <ul class="actions">
        <li><a class="mix-fmwk-user mix-unity-user" href="https://github.com/soomla/unity3d-store/zipball/master"
               onclick="sendGAEvent('code_download_unity', 'Someone wants our ZIP !'); sendMixEvent('code_download_unity', { kind: 'zip' }); " target="_blank">Download
            <strong>ZIP File</strong></a></li>
        <li><a class="mix-fmwk-user mix-unity-user" href="https://github.com/soomla/unity3d-store/tarball/master"
               onclick="sendGAEvent('code_download_unity', 'Someone wants our TAR !'); sendMixEvent('code_download_unity', { kind: 'tar' }); " target="_blank">Download
            <strong>TAR Ball</strong></a></li>
        <li><a class="mix-fmwk-user mix-unity-user" href="https://github.com/soomla/unity3d-store"
               onclick="sendGAEvent('project_view_unity', 'Someone wants to view our project !'); sendMixEvent('project_view_unity', { }); " target="_blank">View
            On <strong>GitHub</strong></a></li>
    </ul>
</header>

<section>

<a class="mix-fmwk-user" href="https://github.com/soomla/"
   onclick="sendGAEvent('soomla_fork', 'Someone wants to fork our project !'); sendMixEvent('soomla_fork', { }); " target="_blank">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 1000;"
                                          src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
                                          alt="Fork me on GitHub"></a>
<p></p>
<div style="margin-bottom: 50px;">

<div style="margin-bottom: 10px;">
<p>    <h1 style="font-size:36px">Economy Model Objects</h1></p>


<p>ModelV3 is a complete data model implementation for Virtual Economies. We intend to provide you with objects that support you every need and will make it easier for you to handle virtual items and virtual economy processes.</p>

<h1>
Virtual Items - The Basics
</h1>

<p>Almost every entity in your virtual economy will be a <code>VirtualItem</code>. There are many types of VirtualItems and you can select the ones that fits your needs. Each one of the various types extends VirtualItem and adds its own behavior on top of it. </p>

<p>Among other features, all VirtualItems (Goods, Packs, Currencies, etc.) has 2 functions to help you easily interact with them: <em>give</em> and <em>take</em>. Use these functions to give your user (or take from him) a specific amount of a specific VirtualItem. (You can also use StoreInventory for these purposes - both ways will work.)</p>

<h2>
VirtualItem Members:</h2>

<p><strong>name</strong> and <strong>description</strong> are pretty obvious.</p>

<p><strong>itemId</strong> - Every VirtualItem has an itemId. This is a unique string that we use to identify between the different VirtualItems. Don't be confused, this has nothing to do with Apple's productId. We'll get to that when we talk about <code>AppStoreItem</code>.</p>

<h2>
PurchasableVirtualItem
</h2>

<p>Not all VirtualItems you can actually purchase. For example, a VirtualCurrency is not Purchasable but a VirtualCurrencyPack is. <code>PurchasableVirtualItems</code> has the function <code>buy</code> that makes the actual purchase using the provided PurchaseType.</p>

<h3>
PurchasableVirtualItem Members:</h3>

<p><strong>purchaseType</strong>  - defined the way the PurchasableVirtualItem is purchased.</p>

<h2>
PurchaseTypes
</h2>

<p>How can one talk about PurchasableVirtualItems without menthioning <code>PurchaseTypes</code>. We wanted to provide game devs with multiple purchase types. When we first implemented modelV3 we added 2 PurchaseTypes and we're going to add more options from time to type.</p>

<h3>
PurchaseWithMarket</h3>

<p>This kind of PurchaseType should be attached to PurchasableVirtualItems that you want to be purchased with the App Store.</p>

<p>When you create a new <code>PurchaseWithMarket</code>, you need to provide an associated AppStoreItem which contains a price and the productId you defined in the App Store. You have to define the associated VirtualItem in <a href="https://itunesconnect.apple.com">iTunes Connect</a> and provide SOOMLA with the same product id.</p>

<h3>
PurchaseWithVirtualItem</h4>

<p>One of the main differences in modelV3 is that it introduces the notion that every PurchasableVirtualItems can be purchased by any VirtualItem. When <code>PurchaseWithVirtualItem</code> is attached to a PurchasableVirtualItems it allows just that.</p>

<p>PurchaseWithVirtualItem is instantiated with the target virtual item and with the amount that you consider the value of the associated PurchasableVirtualItems.</p>

<h1>
VirtualCurrencies
</h1>

<p>Every game has at least one <code>VirtualCurrency</code> and Some has even more than one. Use the VirtualCurrency class to represent your game's virtual currency.</p>

<h2>
VirtualCurrencyPack
</h2>

<p>In game stores, you never buy just a "Gold Coin" or a "Muffin". You actually always buy a pack of the game's VirtualCurrency. <code>VirtualCurrencyPack</code> represents exactly that: a pack of VirtualCurrency. </p>

<p>VirtualCurrencyPack is a PurchasableVirtualItem and because of that, your users will be able to buy it according to the PurchaseType that you'll define.</p>

<h1>
VirtualGoods
</h1>

<p><code>VirtualGoods</code> are the heart of every virtual economy. These are the game objects you want to sell in your game's store. When we worked on modelV3, we realized that there are many possible virtual economies and thus that differ in the types of VirtualGoods in them. So, in modelV3 we also introduced those types of VirtualGoods so everyone will be able to create his own custom virtual economy that fits his game specific needs. The types of VirtualGoods are: "Single Use", "Lifetime", "Equippable", "Single Use Pack" and "Upgrade".</p>

<p>Every virtual good is a PurchasableVirtualItem. You can buy it with another VirtualItem or in the App Store as described above.</p>

<h2>
SingleUseVG
</h2>

<p>The most basic and common kind of a VirtualGood is <code>SingleUseVG</code>. SingleUseVG is a VirtualGood your users can buy multiple times and use multiple time. No limits!</p>

<p>The SingleUseVG's characteristics are:<br>
1. Can be purchased unlimited number of times.<br>
2. Has a balance and saved in the database. Its balance goes up when you "give" it or "buy" it. The balance goes down when it's taken or refunded (in case of an unfriendly refund (see StoreConfig)).</p>

<p><strong>Usage Examples:</strong> 'Hat', 'Sword'</p>

<h2>
SingleUsePackVG
</h2>

<p>Sometimes, you want to to sell packs of SingleUseVGs. To support these cases, we've created <code>SingleUsePackVG</code>. SingleUsePackVGs are just bundles of SingleUseVGs. </p>

<p>The SingleUsePackVG's characteristics are:<br>
1. Can be purchased unlimited number of times.<br>
2. Doesn't Have a balance in the database. The SingleUseVG there's associated with this pack has its own balance. When your users buy a SingleUsePackVG, the balance of the associated SingleUseVG goes up in the amount you defined for the pack (in the code: mGoodAmount).</p>

<p><strong>Usage Examples:</strong> 'Box Of Chocolates', '10 Swords'</p>

<h2>
LifetimeVG
</h2>

<p>Who wouldn't want to live forever? When you define a <code>LifetimeVG</code> you give him eternal life. How amazing is that?
A LifetimeVG is allows you to offer VirtualGoods that are bought only once and kept forever.</p>

<p>The LifetimeVG's characteristics are:<br>
1. Can only be purchased once.<br>
2. Your users can't have more than one of this item. In other words, <code>(0 &lt;= [LifetimeVG's balance] &lt;= 1) == true</code>.</p>

<p><strong>Example usage:</strong> 'No Ads', 'Double Coins'</p>

<h2>
EquippableVG
</h2>

<p>An <code>EquippableVG</code> is a special type of LifetimeVG. In addition to the fact that EquippableVG can be purchased once, it can also be equipped by your users. Equipping means that the user decides to currently use a specific EquippableVG.</p>

<p>The EquippableVG's characteristics are:<br>
1. Can be purchased only once.<br>
2. Can be equipped by the user.<br>
3. Inherits the definition of LifetimeVG.</p>

<p>There are 3 ways to equip an EquippableVG:<br>
1. <strong>LOCAL</strong>    - The current EquippableVG's equipping status doesn't affect any other EquippableVG.<br>
2. <strong>CATEGORY</strong> - In the containing category, if this EquippableVG is equipped, all other EquippableVGs are unequipped.<br>
3. <strong>GLOBAL</strong>   - In the whole game, if this EquippableVG is equipped, all other EquippableVGs are unequipped.</p>

<p><strong>Example Usage:</strong>  </p>

<ul>
<li>multiple characters (play with a specific character)<br>
</li>
<li>'binoculars' (users might only want to take them at night)</li>
</ul>
<h2>
UpgradeVG
</h2>

<p>An <code>UpgradeVG</code> is one VG in a series of UpgradeVGs that define an upgrade sequence for a given VirtualGood. The associated VirtualGood can be any VirtualGood.</p>

<p><strong>This type of virtual good is best explained with an example:</strong> Lets say you have a strength attribute to your character in the game and that strength is on the scale 1-5. You want to provide your users with the ability to upgrade that strength. This is what you'll need to create:<br>
1. SingleUseVG for 'strength'<br>
2. UpgradeVG for strength 'level 1'<br>
3. UpgradeVG for strength 'level 2'<br>
4. UpgradeVG for strength 'level 3'<br>
5. UpgradeVG for strength 'level 4'<br>
6. UpgradeVG for strength 'level 5'  </p>

<p>Now, when the user buys this UpgradeVG, we check and make sure the appropriate conditions are met and buy it for you (which actually means we upgrade the associated VirtualGood).</p>

<p>The UpgradeVG characteristics are:<br>
1. Can be purchased whenever it's not the current upgrade.<br>
2. Doesn't Have a balance in the database.   </p>

<h2>
Other Objects</h2>

<h3>
VirtualCategory
</h3>

<p>A <code>VirtualCategory</code> is used to categorize VirtualGoods. For Example: Your game can have categories of virtual goods like: "Power Ups", "Fruits", "Swords", "Hats" ...</p>

<h3>
AppStoreItem
</h3>

<p><code>AppStoreItem</code> is a representation of an item in the App Store. AppStoreItem is only used for PurchaseWithMarket purchase type.</p>

<p><strong>You have to define AppStoreItems in the App Store. Don't forget that.</strong></p>

<h3>
NonConsumableItem
</h3>

<p>A <code>NonConsumableItem</code> is a representation of a non-consumable item in the App Store. These kinds of items are bought by the user once and kept for him forever in the App Store.</p>

<p>Don't be confused... this is not a LifetimeVG. It's just a non-consumable item in the App Store. This item will be retrieved when you "restoreTransactions". Soomla creates its own mechanisms to preserve LifetimeVGs for you.</p>

<h1>
A word about StoreInfo
</h1>

<p>On runtime, <code>StoreInfo</code> keeps all the virtual items. You can query it for the different virtual items using their itmeIds.</p>

<h2>
Usage Example</h2>

<p>See <strong>MuffinRushAssets</strong> in each one of the projects</p>
    </div>
  
  


<h2>License</h2>

<p>MIT License. Copyright (c) 2012 SOOMLA. <a href="http://project.soom.la">http://project.soom.la</a></p>

<ul>
    <li><a href="http://www.opensource.org/licenses/MIT">http://www.opensource.org/licenses/MIT</a></li>
</ul>
</section>

<footer>
</footer>
</div>

</body>
</html>
